<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_05) on Tue Feb 02 07:15:07 MST 2016 -->
<title>CachedStorage</title>
<meta name="date" content="2016-02-02">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CachedStorage";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CachedStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/slightlyloony/blog/storage/BlogObjectUseCache.html" title="enum in com.slightlyloony.blog.storage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/slightlyloony/blog/storage/Constants.html" title="class in com.slightlyloony.blog.storage"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/slightlyloony/blog/storage/CachedStorage.html" target="_top">Frames</a></li>
<li><a href="CachedStorage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.slightlyloony.blog.storage</div>
<h2 title="Class CachedStorage" class="title">Class CachedStorage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.slightlyloony.blog.storage.CachedStorage</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">CachedStorage</span>
extends java.lang.Object</pre>
<div class="block">Implements a blog object cache on top of the storage system.  Entries are added to the cache as they are read, except that entries over a given
 size are not cached (this is to avoid caching things like giant images, for example).  Entries are deleted from the cache when they are explicitly
 invalidated, or when a new entry can't be added because the maximum size has been exceeded.  In the latter case, least recently used entries are
 removed until the cache has enough space for the new entry.
 <p>
 Note that several independent caches are used instead of a single cache, with a separate cache for broad categories of item types.  For esample,
 there is a cache just for metadata objects (which are small and very frequently accessed) and for images (which are generally much larger, and
 less frequently accessed).  Having several caches also allows multiple threads to access the overall cache, though no more than one thread at
 a time can access a single category cache.
 <p>
 This class can handle concurrent access by multiple threads; it is internally synchronized.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Tom Dilatush  tom@dilatush.com</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/slightlyloony/blog/storage/CachedStorage.html#CachedStorage-com.slightlyloony.blog.storage.Storage-">CachedStorage</a></span>(<a href="../../../../com/slightlyloony/blog/storage/Storage.html" title="class in com.slightlyloony.blog.storage">Storage</a>&nbsp;_storage)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../com/slightlyloony/blog/objects/BlogObject.html" title="class in com.slightlyloony.blog.objects">BlogObject</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/slightlyloony/blog/storage/CachedStorage.html#create-com.slightlyloony.blog.objects.BlogObject-">create</a></span>(<a href="../../../../com/slightlyloony/blog/objects/BlogObject.html" title="class in com.slightlyloony.blog.objects">BlogObject</a>&nbsp;_object)</code>
<div class="block">Creates a new file to persist the given blog object.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/slightlyloony/blog/storage/Storage.html" title="class in com.slightlyloony.blog.storage">Storage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/slightlyloony/blog/storage/CachedStorage.html#getStorage--">getStorage</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../com/slightlyloony/blog/objects/BlogObject.html" title="class in com.slightlyloony.blog.objects">BlogObject</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/slightlyloony/blog/storage/CachedStorage.html#read-com.slightlyloony.blog.objects.BlogID-com.slightlyloony.blog.objects.BlogObjectType-com.slightlyloony.blog.security.BlogObjectAccessRequirements-com.slightlyloony.blog.objects.ContentCompressionState-boolean-">read</a></span>(<a href="../../../../com/slightlyloony/blog/objects/BlogID.html" title="class in com.slightlyloony.blog.objects">BlogID</a>&nbsp;_id,
    <a href="../../../../com/slightlyloony/blog/objects/BlogObjectType.html" title="enum in com.slightlyloony.blog.objects">BlogObjectType</a>&nbsp;_type,
    <a href="../../../../com/slightlyloony/blog/security/BlogObjectAccessRequirements.html" title="enum in com.slightlyloony.blog.security">BlogObjectAccessRequirements</a>&nbsp;_accessRequirements,
    <a href="../../../../com/slightlyloony/blog/objects/ContentCompressionState.html" title="enum in com.slightlyloony.blog.objects">ContentCompressionState</a>&nbsp;_compressionState,
    boolean&nbsp;_isCacheable)</code>
<div class="block">Reads the blog object with the given IntegerDatum, type, and access requirements from the cache if available, otherwise from storage.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/slightlyloony/blog/objects/BlogObject.html" title="class in com.slightlyloony.blog.objects">BlogObject</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/slightlyloony/blog/storage/CachedStorage.html#update-com.slightlyloony.blog.objects.BlogObject-">update</a></span>(<a href="../../../../com/slightlyloony/blog/objects/BlogObject.html" title="class in com.slightlyloony.blog.objects">BlogObject</a>&nbsp;_object)</code>
<div class="block">Updates an existing blog object with the new content given blog object.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CachedStorage-com.slightlyloony.blog.storage.Storage-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CachedStorage</h4>
<pre>public&nbsp;CachedStorage(<a href="../../../../com/slightlyloony/blog/storage/Storage.html" title="class in com.slightlyloony.blog.storage">Storage</a>&nbsp;_storage)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="read-com.slightlyloony.blog.objects.BlogID-com.slightlyloony.blog.objects.BlogObjectType-com.slightlyloony.blog.security.BlogObjectAccessRequirements-com.slightlyloony.blog.objects.ContentCompressionState-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;<a href="../../../../com/slightlyloony/blog/objects/BlogObject.html" title="class in com.slightlyloony.blog.objects">BlogObject</a>&nbsp;read(<a href="../../../../com/slightlyloony/blog/objects/BlogID.html" title="class in com.slightlyloony.blog.objects">BlogID</a>&nbsp;_id,
                       <a href="../../../../com/slightlyloony/blog/objects/BlogObjectType.html" title="enum in com.slightlyloony.blog.objects">BlogObjectType</a>&nbsp;_type,
                       <a href="../../../../com/slightlyloony/blog/security/BlogObjectAccessRequirements.html" title="enum in com.slightlyloony.blog.security">BlogObjectAccessRequirements</a>&nbsp;_accessRequirements,
                       <a href="../../../../com/slightlyloony/blog/objects/ContentCompressionState.html" title="enum in com.slightlyloony.blog.objects">ContentCompressionState</a>&nbsp;_compressionState,
                       boolean&nbsp;_isCacheable)
                throws <a href="../../../../com/slightlyloony/blog/storage/StorageException.html" title="class in com.slightlyloony.blog.storage">StorageException</a></pre>
<div class="block">Reads the blog object with the given IntegerDatum, type, and access requirements from the cache if available, otherwise from storage.  The IntegerDatum and type
 are required.  The access requirements are optional; if missing (null) then this is an internal request.  <i>All</i> requests for external
 access <i>must</i> include access requirements, as this is used as part of the file name.  If an error occurs, an invalid blog object is
 returned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>_id</code> - the blog object IntegerDatum for the desired object</dd>
<dd><code>_type</code> - the blog object type for the desired object</dd>
<dd><code>_accessRequirements</code> - the optional access requirements (for external requests only)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the blog object read</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/slightlyloony/blog/storage/StorageException.html" title="class in com.slightlyloony.blog.storage">StorageException</a></code> - on any problem</dd>
</dl>
</li>
</ul>
<a name="create-com.slightlyloony.blog.objects.BlogObject-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;<a href="../../../../com/slightlyloony/blog/objects/BlogObject.html" title="class in com.slightlyloony.blog.objects">BlogObject</a>&nbsp;create(<a href="../../../../com/slightlyloony/blog/objects/BlogObject.html" title="class in com.slightlyloony.blog.objects">BlogObject</a>&nbsp;_object)
                  throws <a href="../../../../com/slightlyloony/blog/storage/StorageException.html" title="class in com.slightlyloony.blog.storage">StorageException</a></pre>
<div class="block">Creates a new file to persist the given blog object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>_object</code> - the object to persist</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the blog object representing the shiny new object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/slightlyloony/blog/storage/StorageException.html" title="class in com.slightlyloony.blog.storage">StorageException</a></code> - on any problem</dd>
</dl>
</li>
</ul>
<a name="update-com.slightlyloony.blog.objects.BlogObject-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;<a href="../../../../com/slightlyloony/blog/objects/BlogObject.html" title="class in com.slightlyloony.blog.objects">BlogObject</a>&nbsp;update(<a href="../../../../com/slightlyloony/blog/objects/BlogObject.html" title="class in com.slightlyloony.blog.objects">BlogObject</a>&nbsp;_object)
                  throws <a href="../../../../com/slightlyloony/blog/storage/StorageException.html" title="class in com.slightlyloony.blog.storage">StorageException</a></pre>
<div class="block">Updates an existing blog object with the new content given blog object.  The returned blog object contains a stream for the updated blog
 object.  If the updated object was in the cache prior to the invocation of this method, it will be deleted and the new object will be cached
 instead (if possible).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>_object</code> - the blog object with updated content</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the blog object representing the shiny new object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/slightlyloony/blog/storage/StorageException.html" title="class in com.slightlyloony.blog.storage">StorageException</a></code> - on any problem</dd>
</dl>
</li>
</ul>
<a name="getStorage--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getStorage</h4>
<pre>public&nbsp;<a href="../../../../com/slightlyloony/blog/storage/Storage.html" title="class in com.slightlyloony.blog.storage">Storage</a>&nbsp;getStorage()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CachedStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/slightlyloony/blog/storage/BlogObjectUseCache.html" title="enum in com.slightlyloony.blog.storage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/slightlyloony/blog/storage/Constants.html" title="class in com.slightlyloony.blog.storage"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/slightlyloony/blog/storage/CachedStorage.html" target="_top">Frames</a></li>
<li><a href="CachedStorage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
